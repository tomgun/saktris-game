# F-0022: ActionMode

## Acceptance Criteria

### AC1: Real-time gameplay
- Both players can move independently (not turn-based)
- Each player has a move cooldown timer
- After moving, player must wait for cooldown before next move
- Default cooldown: 1 second (configurable via `action_move_cooldown`)

### AC2: Piece auto-arrival
- Pieces arrive automatically at timed intervals
- Alternates between white and black
- Default interval: 3 seconds (configurable via `action_arrival_interval`)
- Uses existing piece queue (FIXED mode order)

### AC3: Back row full handling
- When back row is full, arriving piece bumps column forward
- All pieces in column shift one square toward opponent
- If column completely full, furthest piece falls off (captured)
- Bump follows the cached target column shown in UI

### AC4: Arrival indicator UI
- Shows countdown timer until next piece arrives
- Shows preview of next piece type
- Highlights target square (not full column) where piece will land
- Indicator pulses with urgency as time runs out

### AC5: Cooldown indicator UI
- Visual cooldown bars for both players
- Shows remaining time until player can move again
- Positioned at player's side of board

### AC6: Win condition
- Game ends when a king is captured (not checkmate)
- Draw detection disabled (no stalemate/repetition/50-move in action mode)
- Triplet clears can capture king (existing rule)

### AC7: Pawn promotion disabled
- Pawns reaching back row are captured (fall off board)
- Prevents overpowered instant queen promotions
- Consistent with bump "fall off" mechanic

### AC8: AI opponent support
- AI can play in action mode
- AI has reaction delay after cooldown ready (0.4-1.0s default)
- Prevents unfair instant AI moves
- Configurable via `action_ai_reaction_min` and `action_ai_reaction_max`

### AC9: Start action mode
- Press 'A' key to start new action mode game vs AI
- Initializes with settings from Settings autoload

## Settings

| Setting | Default | Description |
|---------|---------|-------------|
| `action_move_cooldown` | 1.0 | Seconds between moves per player |
| `action_arrival_interval` | 3.0 | Seconds between piece auto-arrivals |
| `action_ai_reaction_min` | 0.4 | Minimum AI reaction delay |
| `action_ai_reaction_max` | 1.0 | Maximum AI reaction delay |

## Test Notes
- Manual testing via 'A' key shortcut
- Verify cooldowns work for both players
- Verify AI waits before moving
- Verify bump mechanic when row full
- Verify pawn falls off at back row

## Future Enhancements (not in scope)
- Weighted random piece selection
- Per-player piece queues
- Sub-modes (Blitz, Strategic, Survival)
- Arrival acceleration over time
- Settings UI for action mode config
